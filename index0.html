<!doctype html>
<html>
  <head>
    <title>YouTube 轉換器</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
      body {
        font-family: "Noto Sans TC", system-ui, sans-serif;
        padding: 1em;
      }
      input,
      button,
      textarea {
        width: 100%;
        font-size: 1rem;
        margin-top: 0.5em;
      }
      .result-block {
        display: flex;
        align-items: center;
        flex-wrap: wrap;
        margin-top: 1em;
      }
      .result-block label {
        font-weight: bold;
        display: inline;
      }
      .result-block a {
        display: inline;
        color: blue;
        text-decoration: underline;
      }
      .result-block textarea {
        flex-basis: 100%;
        margin-top: 0.2em;
      }
    </style>
  </head>
  <body>
    <h2>YouTube 轉換器</h2>
    <div class="result-block">
      <label style="display: inline">請貼上 YouTube/YouTube Music 連結：</label>
      <input id="yt" placeholder="https://www.youtube.com/watch?v=jNQXAC9IVRw" />
      <button onclick="convert()">轉換</button>
    </div>

    <div class="result-block">
      <label style="display: inline">youtube 分享網址：</label>
      <a id="youtubelink" href="#" target="_blank" style="display: none">點我前往影片</a>
      <textarea id="youtube" rows="1" readonly></textarea>
    </div>

    <div class="result-block">
      <label style="display: inline">Invidious 分享網址：</label>
      <a id="Invidiouslink" href="#" target="_blank" style="display: none">點我前往影片</a>
      <textarea id="Invidious" rows="1" readonly></textarea>
    </div>

    <div class="result-block">
      <label style="display: inline">Piped 分享網址：</label>
      <a id="PrivatecoffeePipedlink" href="#" target="_blank" style="display: none">點我前往影片</a>
      <textarea id="PrivatecoffeePiped" rows="1" readonly></textarea>
    </div>

    <div class="result-block">
      <label style="display: inline">Piped 分享網址：</label>
      <a id="wirewaychPipedlink" href="#" target="_blank" style="display: none">點我前往影片</a>
      <textarea id="wirewaychPiped" rows="1" readonly></textarea>
    </div>

    <div class="result-block" style="display: none">
      <label style="display: inline">Piped 分享網址：</label>
      <a id="NYCPipedlink" href="#" target="_blank" style="display: none">點我前往影片</a>
      <textarea id="NYCPiped" rows="1" readonly></textarea>
    </div>

    <div class="result-block" style="display: none">
      <label style="display: inline">Piped 分享網址：</label>
      <a id="CALPipedlink" href="#" target="_blank" style="display: none">點我前往影片</a>
      <textarea id="CALPiped" rows="1" readonly></textarea>
    </div>

    <div class="result-block" style="display: none">
      <label style="display: inline">Piped 分享網址：</label>
      <a id="POLPipedlink" href="#" target="_blank" style="display: none">點我前往影片</a>
      <textarea id="POLPiped" rows="1" readonly></textarea>
    </div>

    <div class="result-block">
      <label style="display: inline">RePiped 分享網址：</label>
      <a id="wirewaychRePipedlink" href="#" target="_blank" style="display: none">點我前往影片</a>
      <textarea id="wirewaychRePiped" rows="1" readonly></textarea>
    </div>

    <div class="result-block">
      <label style="display: inline">RePiped 分享網址：</label>
      <a id="wirewaychdevRePipedlink" href="#" target="_blank" style="display: none">點我前往影片</a>
      <textarea id="wirewaychdevRePiped" rows="1" readonly></textarea>
    </div>

    <div class="result-block">
      <label style="display: inline">Hyperpipe 分享網址：</label>
      <a id="duckspartyHyperpipelink" href="#" target="_blank" style="display: none">點我前往音樂</a>
      <textarea id="duckspartyHyperpipe" rows="1" readonly></textarea>
    </div>

    <div class="result-block" style="display: none">
      <label style="display: inline">Hyperpipe 分享網址：</label>
      <a id="NYCHyperpipelink" href="#" target="_blank" style="display: none">點我前往音樂</a>
      <textarea id="NYCHyperpipe" rows="1" readonly></textarea>
    </div>

    <div class="result-block" style="display: none">
      <label style="display: inline">Hyperpipe 分享網址：</label>
      <a id="CALHyperpipelink" href="#" target="_blank" style="display: none">點我前往音樂</a>
      <textarea id="CALHyperpipe" rows="1" readonly></textarea>
    </div>

    <div class="result-block" style="display: none">
      <label style="display: inline">Hyperpipe 分享網址：</label>
      <a id="POLHyperpipelink" href="#" target="_blank" style="display: none">點我前往音樂</a>
      <textarea id="POLHyperpipe" rows="1" readonly></textarea>
    </div>

    <div class="result-block">
      <label style="display: inline">ytify 分享網址：</label>
      <a id="ytifylink" href="#" target="_blank" style="display: none">點我前往音樂</a>
      <textarea id="ytify" rows="1" readonly></textarea>
    </div>

    <div class="result-block">
      <label style="display: inline">m.gjhyss.com 分享網址：</label>
      <a id="link1" href="#" target="_blank" style="display: none">點我前往影片</a>
      <textarea id="m.gjhyss.com" rows="1" readonly></textarea>
    </div>

    <div class="result-block">
      <label style="display: inline">cinemaphile.com 分享網址：</label>
      <a id="link2" href="#" target="_blank" style="display: none">點我前往影片</a>
      <textarea id="cinemaphile.com" rows="1" readonly></textarea>
    </div>

    <div class="result-block">
      <label style="display: inline">YMusic 分享網址：</label>
      <a id="link3" href="#" target="_blank" style="display: none">點我前往影片</a>
      <textarea id="YMusic" rows="1" readonly></textarea>
    </div>

    <div class="result-block" style="display: none">
      <label style="display: inline">AstroTube 分享網址：</label>
      <a id="link4" href="#" target="_blank" style="display: none">點我前往影片</a>
      <textarea id="AstroTube" rows="1" readonly></textarea>
    </div>

    <div class="result-block">
      <label style="display: inline">最短 YouTube 連結：</label>
      <a id="shortURLlink" href="#" target="_blank" style="display: none">點我前往影片</a>
      <textarea id="shorturl" rows="1" readonly></textarea>
    </div>

    <div class="result-block">
      <label style="display: inline">YouTube Music 連結：</label>
      <a id="YTMusiclink" href="#" target="_blank" style="display: none">點我前往音樂</a>
      <textarea id="YTMusic" rows="1" readonly></textarea>
    </div>

    <hr />
    <div class="result-block">
      <p><strong>切換其他版本：</strong></p>
      <ul>
        <li><a href="index0.html">index0.html（只支援影片）</a></li>
        <li><a href="index.html">index.html（功能完整但相容性較低）</a></li>
        <li><a href="index-legacy.html">index-legacy.html（功能完整，相容舊瀏覽器）</a></li>
      </ul>
    </div>

    <script>
      function convert() {
        // 取得輸入值
        var inputObj = document.getElementById("yt");
        var val = inputObj.value;
        
        // 支援 IE8 的 trim 寫法
        var input = val.replace(/^\s+|\s+$/g, '');
        
        // 正則表達式抓取 ID
        var match = input.match(/(?:v=|\/)([0-9A-Za-z_-]{11})/);

        if (!match) {
           // 定義所有需要清空的欄位 ID
           var ids = [
             "youtube", "Invidious", "PrivatecoffeePiped", "wirewaychPiped",
             "NYCPiped", "CALPiped", "POLPiped", "wirewaychRePiped",
             "wirewaychdevRePiped", "duckspartyHyperpipe", "NYCHyperpipe",
             "CALHyperpipe", "POLHyperpipe", "ytify", "m.gjhyss.com",
             "cinemaphile.com", "YMusic", "AstroTube", "shorturl", "YTMusic"
           ];
           
           for (var i = 0; i < ids.length; i++) {
             var el = document.getElementById(ids[i]);
             if(el) el.value = "⚠️ 無法辨識 ID";
             var linkEl = document.getElementById(ids[i] + (ids[i].indexOf("link") === -1 ? "link" : "")); // 簡單推算 link ID，你的命名規則有些有 link 有些是 link1/2... 建議手動處理或統一命名
             // 為了保險起見，這邊針對你的命名規則簡單處理錯誤顯示即可，若要完美隱藏需逐一列出
           }
           alert("無法辨識影片 ID，請確認連結格式。");
           return;
        }

        var vid = match[1];

        // 使用傳統字串串接 (相容 IE)
        var youtubeUrl = "https://yout-ube.com/watch?v=" + vid;
        var InvidiousUrl = "https://inv.nadeko.net/watch?v=" + vid;
        var PrivatecoffeePipedUrl = "https://piped.private.coffee/watch?v=" + vid;
        var wirewaychPipedUrl = "https://piped.wireway.ch/watch?v=" + vid;
        var NYCPipedUrl = "https://nyc1.pi.ggtyler.dev/watch?v=" + vid;
        var CALPipedUrl = "https://cal1.pi.ggtyler.dev/watch?v=" + vid;
        var POLPipedUrl = "https://pol1.pi.ggtyler.dev/watch?v=" + vid;
        var wirewaychRePipedUrl = "https://repiped.wireway.ch/video.html?v=" + vid;
        var wirewaychdevRePipedUrl = "https://repiped-development-c7df8a.onwireway.online/video.html?v=" + vid;
        var duckspartyHyperpipeUrl = "https://hyperpipe.ducks.party/watch?v=" + vid;
        var NYCHyperpipeUrl = "https://nyc1.hp.ggtyler.dev/watch?v=" + vid;
        var CALHyperpipeUrl = "https://cal1.hp.ggtyler.dev/watch?v=" + vid;
        var POLHyperpipeUrl = "https://pol1.hp.ggtyler.dev/watch?v=" + vid;
        var ytifyUrl = "https://ytify.pp.ua/?s=" + vid;
        var gjhyssUrl = "https://m.gjhyss.com/share?v=" + vid;
        var cinemaphileUrl = "https://cinemaphile.com/watch?v=" + vid;
        var YMusicUrl = "https://ymusicapp.com/watch?v=" + vid;
        var AstroTubeUrl = "https://at.ggtyler.dev/watch?v=" + vid;
        var shortUrl = "https://youtu.be/" + vid;
        var YTMusicUrl = "https://music.youtube.com/watch?v=" + vid;

        // 設定 helper 函式來處理文字與顯示 (相容 IE8 innerText)
        function setLink(textAreaId, linkId, url, isMusic) {
          var textArea = document.getElementById(textAreaId);
          var link = document.getElementById(linkId);
          
          if (textArea) textArea.value = url;
          if (link) {
            link.href = url;
            // 處理 textContent vs innerText
            if ('textContent' in link) {
              link.textContent = url;
            } else {
              link.innerText = url;
            }
            link.style.display = "inline";
          }
        }

        // 執行填入
        setLink("youtube", "youtubelink", youtubeUrl);
        setLink("Invidious", "Invidiouslink", InvidiousUrl);
        setLink("PrivatecoffeePiped", "PrivatecoffeePipedlink", PrivatecoffeePipedUrl);
        setLink("wirewaychPiped", "wirewaychPipedlink", wirewaychPipedUrl);
        setLink("NYCPiped", "NYCPipedlink", NYCPipedUrl);
        setLink("CALPiped", "CALPipedlink", CALPipedUrl);
        setLink("POLPiped", "POLPipedlink", POLPipedUrl);
        setLink("wirewaychRePiped", "wirewaychRePipedlink", wirewaychRePipedUrl);
        setLink("wirewaychdevRePiped", "wirewaychdevRePipedlink", wirewaychdevRePipedUrl);
        setLink("duckspartyHyperpipe", "duckspartyHyperpipelink", duckspartyHyperpipeUrl);
        setLink("NYCHyperpipe", "NYCHyperpipelink", NYCHyperpipeUrl);
        setLink("CALHyperpipe", "CALHyperpipelink", CALHyperpipeUrl);
        setLink("POLHyperpipe", "POLHyperpipelink", POLHyperpipeUrl);
        setLink("ytify", "ytifylink", ytifyUrl);
        setLink("m.gjhyss.com", "link1", gjhyssUrl);
        setLink("cinemaphile.com", "link2", cinemaphileUrl);
        setLink("YMusic", "link3", YMusicUrl);
        setLink("AstroTube", "link4", AstroTubeUrl);
        setLink("shorturl", "shortURLlink", shortUrl);
        setLink("YTMusic", "YTMusiclink", YTMusicUrl);
      }
    </script>
  </body>
</html>
